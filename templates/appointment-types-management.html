<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Appointment Types Management</title>
    <link rel="stylesheet" href="/static/calendar.css">
    <link rel="stylesheet" href="/static/nav.css">
    <link rel="stylesheet" href="/static/css/appointment-type-modal.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        .management-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .management-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .management-header h1 {
            color: #2D6356;
            margin: 0;
        }
        
        .btn-primary {
            background: #2D6356;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.2s;
        }
        
        .btn-primary:hover {
            background: #1d4a3a;
        }
        
        .appointment-types-grid {
            display: grid;
            gap: 1.5rem;
        }
        
        .category-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .category-header {
            background: #f8f9fa;
            padding: 1rem 1.5rem;
            border-bottom: 2px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .category-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .category-color {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .category-name {
            font-size: 1.25rem;
            font-weight: 600;
            color: #374151;
        }
        
        .appointment-type-list {
            padding: 0;
            margin: 0;
            list-style: none;
        }
        
        .appointment-type-item {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #f3f4f6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }
        
        .appointment-type-item:hover {
            background: #f9fafb;
        }
        
        .appointment-type-item:last-child {
            border-bottom: none;
        }
        
        .type-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }
        
        .type-color-indicator {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .type-name {
            font-weight: 500;
            color: #1f2937;
            flex: 1;
        }
        
        .type-details {
            display: flex;
            gap: 1rem;
            align-items: center;
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        .type-duration {
            background: #f3f4f6;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }
        
        .type-billing {
            background: #f3f1ff;
            color: #8b5cf6;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .type-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .status-active {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-inactive {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .type-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .btn-icon {
            background: transparent;
            border: 1px solid #d1d5db;
            padding: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-icon:hover {
            background: #f9fafb;
            border-color: #9ca3af;
        }
        
        .btn-edit {
            color: #2563eb;
        }
        
        .btn-delete {
            color: #dc2626;
        }
        
        .btn-toggle {
            color: #6b7280;
        }
        
        .empty-state {
            padding: 3rem;
            text-align: center;
            color: #6b7280;
        }
        
        .add-type-row {
            padding: 1rem 1.5rem;
            background: #f9fafb;
            border-top: 1px solid #e5e7eb;
            text-align: center;
        }
        
        .btn-add-type {
            background: transparent;
            color: #2D6356;
            border: 1px solid #2D6356;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-add-type:hover {
            background: #2D6356;
            color: white;
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .modal-header h2 {
            margin: 0;
            color: #1f2937;
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 1rem;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2D6356;
            box-shadow: 0 0 0 3px rgba(45, 99, 86, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .color-picker-wrapper {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .color-preview {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            border: 2px solid #d1d5db;
        }
        
        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        
        .btn-secondary {
            background: white;
            color: #6b7280;
            border: 1px solid #d1d5db;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .btn-secondary:hover {
            background: #f9fafb;
        }
    </style>
</head>
<body>
    <script src="/static/js/nav-bar.js"></script>
    <div id="top-nav"></div>
    
    <div class="management-container">
        <div class="management-header">
            <h1>Appointment Types Management</h1>
            <button class="btn-primary" onclick="openCreateModal()">
                <span style="margin-right: 0.5rem;">+</span> Add Appointment Type
            </button>
        </div>
        
        <div class="appointment-types-grid" id="appointment-types-container">
            <!-- Categories and appointment types will be loaded here -->
            <div class="loading-state" style="text-align: center; padding: 3rem;">
                <div class="spinner"></div>
                <p>Loading appointment types...</p>
            </div>
        </div>
    </div>

    <!-- Create/Edit Modal -->
    <div id="appointment-type-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Create Appointment Type</h2>
            </div>
            <div class="modal-body">
                <form id="appointment-type-form">
                    <input type="hidden" id="type-id" />
                    
                    <div class="form-group">
                        <label for="type-name">Name *</label>
                        <input type="text" id="type-name" required placeholder="e.g., New Assessment, Follow-up">
                    </div>
                    
                    <div class="form-group">
                        <label for="type-category">Category *</label>
                        <select id="type-category" required>
                            <option value="">Select a category</option>
                            <option value="new">+ Create New Category</option>
                        </select>
                        <input type="text" id="new-category-name" style="display: none; margin-top: 0.5rem;" 
                               placeholder="Enter new category name">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="type-duration">Duration (minutes) *</label>
                            <input type="number" id="type-duration" required min="5" max="480" step="5" value="30">
                        </div>
                        
                        <div class="form-group">
                            <label for="type-color">Color *</label>
                            <div class="color-picker-wrapper">
                                <input type="color" id="type-color" value="#2D6356">
                                <div class="color-preview" id="color-preview"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="type-billing-code">Default Billing Code</label>
                        <input type="text" id="type-billing-code" placeholder="e.g., 101, 8618">
                    </div>
                    
                    <div class="form-group">
                        <label for="type-default-notes">Default Notes Template</label>
                        <textarea id="type-default-notes" rows="3" 
                                  placeholder="Template text that will be pre-filled in booking notes"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="type-description">Description</label>
                        <textarea id="type-description" rows="2" 
                                  placeholder="Brief description of this appointment type"></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="type-sort-order">Sort Order</label>
                            <input type="number" id="type-sort-order" min="0" value="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="type-status">Status</label>
                            <select id="type-status">
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="type-requires-auth"> 
                            Requires Authorization
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="type-billable" checked> 
                            Billable Appointment
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn-primary" onclick="saveAppointmentType()">Save</button>
            </div>
        </div>
    </div>

    <script>
        let currentPracticeId = 1; // This should come from session/auth
        let appointmentTypes = [];
        let editingTypeId = null;

        // Load appointment types on page load
        window.addEventListener('DOMContentLoaded', () => {
            loadAppointmentTypes();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Category dropdown change handler
            document.getElementById('type-category').addEventListener('change', (e) => {
                const newCategoryInput = document.getElementById('new-category-name');
                if (e.target.value === 'new') {
                    newCategoryInput.style.display = 'block';
                    newCategoryInput.required = true;
                } else {
                    newCategoryInput.style.display = 'none';
                    newCategoryInput.required = false;
                }
            });

            // Color picker sync
            document.getElementById('type-color').addEventListener('input', (e) => {
                document.getElementById('color-preview').style.backgroundColor = e.target.value;
            });

            // Modal close on overlay click
            document.getElementById('appointment-type-modal').addEventListener('click', (e) => {
                if (e.target === e.currentTarget) {
                    closeModal();
                }
            });
        }

        async function loadAppointmentTypes() {
            try {
                const response = await fetch(`/api/practices/${currentPracticeId}/appointment-types/effective?enabled_only=false`);
                if (!response.ok) throw new Error('Failed to load appointment types');
                
                appointmentTypes = await response.json();
                renderAppointmentTypes();
                updateCategoryDropdown();
            } catch (error) {
                console.error('Error loading appointment types:', error);
                showError('Failed to load appointment types');
            }
        }

        function renderAppointmentTypes() {
            const container = document.getElementById('appointment-types-container');
            
            // Group types by category
            const categories = new Map();
            
            appointmentTypes.forEach(type => {
                if (!type.parent_id) {
                    // This is a category
                    if (!categories.has(type.id)) {
                        categories.set(type.id, {
                            ...type,
                            children: []
                        });
                    }
                } else {
                    // This is a child type
                    const parent = appointmentTypes.find(t => t.id === type.parent_id);
                    if (parent) {
                        if (!categories.has(parent.id)) {
                            categories.set(parent.id, {
                                ...parent,
                                children: []
                            });
                        }
                        categories.get(parent.id).children.push(type);
                    }
                }
            });

            // Render categories and their types
            container.innerHTML = '';
            
            if (categories.size === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>No appointment types configured</h3>
                        <p>Click "Add Appointment Type" to create your first appointment type.</p>
                    </div>
                `;
                return;
            }

            categories.forEach(category => {
                const categorySection = document.createElement('div');
                categorySection.className = 'category-section';
                
                categorySection.innerHTML = `
                    <div class="category-header">
                        <div class="category-title">
                            <div class="category-color" style="background-color: ${category.color}"></div>
                            <span class="category-name">${category.name}</span>
                        </div>
                        <div class="category-actions">
                            <button class="btn-icon btn-edit" onclick="editCategory(${category.id})" title="Edit Category">
                                <span class="material-icons">edit</span>
                            </button>
                            <button class="btn-icon btn-delete" onclick="deleteCategory(${category.id})" title="Delete Category">
                                <span class="material-icons">delete</span>
                            </button>
                        </div>
                    </div>
                    <ul class="appointment-type-list">
                        ${category.children.length > 0 ? category.children.map(type => `
                            <li class="appointment-type-item">
                                <div class="type-info">
                                    <div class="type-color-indicator" style="background-color: ${type.color || category.color}"></div>
                                    <span class="type-name">${type.name}</span>
                                    <div class="type-details">
                                        <span class="type-duration">${type.effective_duration || type.duration}min</span>
                                        ${type.default_billing_code ? `<span class="type-billing">${type.default_billing_code}</span>` : ''}
                                        <span class="type-status ${type.is_active ? 'status-active' : 'status-inactive'}">
                                            ${type.is_active ? 'Active' : 'Inactive'}
                                        </span>
                                    </div>
                                </div>
                                <div class="type-actions">
                                    <button class="btn-icon btn-edit" onclick="editAppointmentType(${type.id})" title="Edit">
                                        <span class="material-icons">edit</span>
                                    </button>
                                    <button class="btn-icon btn-toggle" onclick="toggleAppointmentType(${type.id}, ${!type.is_active})" 
                                            title="${type.is_active ? 'Deactivate' : 'Activate'}">
                                        <span class="material-icons">${type.is_active ? 'toggle_on' : 'toggle_off'}</span>
                                    </button>
                                    <button class="btn-icon btn-delete" onclick="deleteAppointmentType(${type.id})" title="Delete">
                                        <span class="material-icons">delete</span>
                                    </button>
                                </div>
                            </li>
                        `).join('') : '<li class="empty-state">No appointment types in this category</li>'}
                    </ul>
                    <div class="add-type-row">
                        <button class="btn-add-type" onclick="openCreateModal(${category.id})">
                            + Add Type to ${category.name}
                        </button>
                    </div>
                `;
                
                container.appendChild(categorySection);
            });
        }

        function updateCategoryDropdown() {
            const select = document.getElementById('type-category');
            const currentValue = select.value;
            
            // Clear existing options except first two
            while (select.options.length > 2) {
                select.remove(2);
            }
            
            // Add categories
            const categories = appointmentTypes.filter(t => !t.parent_id);
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.id;
                option.textContent = category.name;
                select.appendChild(option);
            });
            
            // Restore previous value if it exists
            if (currentValue && select.querySelector(`option[value="${currentValue}"]`)) {
                select.value = currentValue;
            }
        }

        function openCreateModal(categoryId = null) {
            editingTypeId = null;
            document.getElementById('modal-title').textContent = 'Create Appointment Type';
            document.getElementById('appointment-type-form').reset();
            document.getElementById('type-status').value = 'active';
            document.getElementById('type-billable').checked = true;
            
            if (categoryId) {
                document.getElementById('type-category').value = categoryId;
            }
            
            document.getElementById('color-preview').style.backgroundColor = '#2D6356';
            document.getElementById('appointment-type-modal').classList.add('active');
        }

        async function editAppointmentType(typeId) {
            const type = appointmentTypes.find(t => t.id === typeId);
            if (!type) return;
            
            editingTypeId = typeId;
            document.getElementById('modal-title').textContent = 'Edit Appointment Type';
            document.getElementById('type-id').value = type.id;
            document.getElementById('type-name').value = type.name;
            document.getElementById('type-category').value = type.parent_id || '';
            document.getElementById('type-duration').value = type.duration;
            document.getElementById('type-color').value = type.color;
            document.getElementById('color-preview').style.backgroundColor = type.color;
            document.getElementById('type-billing-code').value = type.default_billing_code || '';
            document.getElementById('type-default-notes').value = type.default_notes || '';
            document.getElementById('type-description').value = type.description || '';
            document.getElementById('type-sort-order').value = type.sort_order || 0;
            document.getElementById('type-status').value = type.is_active ? 'active' : 'inactive';
            document.getElementById('type-requires-auth').checked = type.requires_authorization || false;
            document.getElementById('type-billable').checked = type.is_billable !== false;
            
            document.getElementById('appointment-type-modal').classList.add('active');
        }

        function editCategory(categoryId) {
            // For now, edit category as a regular type
            editAppointmentType(categoryId);
        }

        function closeModal() {
            document.getElementById('appointment-type-modal').classList.remove('active');
            document.getElementById('appointment-type-form').reset();
            editingTypeId = null;
        }

        async function saveAppointmentType() {
            const form = document.getElementById('appointment-type-form');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const categorySelect = document.getElementById('type-category');
            let parentId = categorySelect.value;
            
            // Handle new category creation
            if (parentId === 'new') {
                const newCategoryName = document.getElementById('new-category-name').value.trim();
                if (!newCategoryName) {
                    alert('Please enter a category name');
                    return;
                }
                
                // Create the new category first
                try {
                    const categoryResponse = await fetch('/api/appointment-types', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            name: newCategoryName,
                            parent_id: null,
                            practice_id: currentPracticeId,
                            color: document.getElementById('type-color').value,
                            duration: 30,
                            is_active: true
                        })
                    });
                    
                    if (!categoryResponse.ok) throw new Error('Failed to create category');
                    const newCategory = await categoryResponse.json();
                    parentId = newCategory.id;
                } catch (error) {
                    console.error('Error creating category:', error);
                    showError('Failed to create category');
                    return;
                }
            }
            
            const typeData = {
                name: document.getElementById('type-name').value.trim(),
                parent_id: parentId ? parseInt(parentId) : null,
                practice_id: currentPracticeId,
                color: document.getElementById('type-color').value,
                duration: parseInt(document.getElementById('type-duration').value),
                description: document.getElementById('type-description').value.trim() || null,
                is_active: document.getElementById('type-status').value === 'active'
            };
            
            // Add practice customization data
            const customizationData = {
                appointment_type_id: editingTypeId,
                practice_id: currentPracticeId,
                enabled: typeData.is_active,
                effective_duration: typeData.duration,
                effective_color: typeData.color,
                default_billing_code: document.getElementById('type-billing-code').value.trim() || null,
                default_notes: document.getElementById('type-default-notes').value.trim() || null,
                sort_order: parseInt(document.getElementById('type-sort-order').value) || 0,
                requires_authorization: document.getElementById('type-requires-auth').checked,
                is_billable: document.getElementById('type-billable').checked
            };
            
            try {
                let response;
                
                if (editingTypeId) {
                    // Update existing type
                    response = await fetch(`/api/appointment-types/${editingTypeId}`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(typeData)
                    });
                    
                    // Also update practice customization
                    if (response.ok) {
                        await fetch(`/api/practices/${currentPracticeId}/appointment-types/customizations/${editingTypeId}`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(customizationData)
                        });
                    }
                } else {
                    // Create new type
                    response = await fetch('/api/appointment-types', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(typeData)
                    });
                    
                    // Create practice customization
                    if (response.ok) {
                        const newType = await response.json();
                        customizationData.appointment_type_id = newType.id;
                        
                        await fetch(`/api/practices/${currentPracticeId}/appointment-types/customizations`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(customizationData)
                        });
                    }
                }
                
                if (!response.ok) throw new Error('Failed to save appointment type');
                
                showSuccess('Appointment type saved successfully');
                closeModal();
                loadAppointmentTypes();
            } catch (error) {
                console.error('Error saving appointment type:', error);
                showError('Failed to save appointment type');
            }
        }

        async function toggleAppointmentType(typeId, activate) {
            try {
                const response = await fetch(`/api/appointment-types/${typeId}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ is_active: activate })
                });
                
                if (!response.ok) throw new Error('Failed to update appointment type');
                
                showSuccess(`Appointment type ${activate ? 'activated' : 'deactivated'}`);
                loadAppointmentTypes();
            } catch (error) {
                console.error('Error toggling appointment type:', error);
                showError('Failed to update appointment type');
            }
        }

        async function deleteAppointmentType(typeId) {
            if (!confirm('Are you sure you want to delete this appointment type?')) return;
            
            try {
                const response = await fetch(`/api/appointment-types/${typeId}`, {
                    method: 'DELETE'
                });
                
                if (!response.ok) throw new Error('Failed to delete appointment type');
                
                showSuccess('Appointment type deleted');
                loadAppointmentTypes();
            } catch (error) {
                console.error('Error deleting appointment type:', error);
                showError('Failed to delete appointment type');
            }
        }

        async function deleteCategory(categoryId) {
            const category = appointmentTypes.find(t => t.id === categoryId);
            const hasChildren = appointmentTypes.some(t => t.parent_id === categoryId);
            
            if (hasChildren) {
                if (!confirm(`The category "${category.name}" contains appointment types. Deleting it will also delete all types within it. Continue?`)) {
                    return;
                }
            } else {
                if (!confirm(`Are you sure you want to delete the category "${category.name}"?`)) {
                    return;
                }
            }
            
            try {
                const response = await fetch(`/api/appointment-types/${categoryId}`, {
                    method: 'DELETE'
                });
                
                if (!response.ok) throw new Error('Failed to delete category');
                
                showSuccess('Category deleted');
                loadAppointmentTypes();
            } catch (error) {
                console.error('Error deleting category:', error);
                showError('Failed to delete category');
            }
        }

        function showSuccess(message) {
            // Simple success notification - can be enhanced with a toast library
            const toast = document.createElement('div');
            toast.className = 'toast-success';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #10b981;
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 6px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        function showError(message) {
            const toast = document.createElement('div');
            toast.className = 'toast-error';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #ef4444;
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 6px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 5000);
        }
    </script>
    
    <style>
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</body>
</html>